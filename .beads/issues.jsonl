{"id":"invoice-hub-1b4","title":"Mitigate URL token exposure","description":"Portal tokens are embedded in URLs, which can leak via referrers/logs. Evaluate and implement mitigations (Referrer-Policy, shorter TTL, one-time-use, or alternative transport).","acceptance_criteria":"Decision documented and mitigation implemented if needed.","status":"open","priority":3,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:48:55.20231+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T13:48:55.20231+10:00","labels":["portal","security"]}
{"id":"invoice-hub-1pm","title":"Harden portal token error handling","description":"Portal routes parse error.message strings for expired/invalid tokens. Replace with JsonWebTokenError/TokenExpiredError checks for robustness.","acceptance_criteria":"Routes branch on error types, not substrings; responses unchanged.","status":"open","priority":3,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:48:44.848448+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T13:48:44.848448+10:00","labels":["auth","portal"]}
{"id":"invoice-hub-1sz","title":"1.1 Add standalone output to next.config.ts","description":"Configure Next.js with output: 'standalone' for Azure deployment","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:50.13432+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:20:07.653002+10:00","closed_at":"2026-01-26T14:20:07.653002+10:00","close_reason":"Added output: 'standalone' to next.config.ts"}
{"id":"invoice-hub-1v0","title":"2.2 Verify admin API endpoints return 401 without auth","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:19.02416+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:01:03.718378+10:00","dependencies":[{"issue_id":"invoice-hub-1v0","depends_on_id":"invoice-hub-etm","type":"blocks","created_at":"2026-01-25T21:16:30.51582+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-2ah","title":"3.3 Test deployment by pushing to main","description":"Push changes to main branch and verify GitHub Actions deploys successfully to Azure","status":"in_progress","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:54.606946+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:38:36.98612+10:00","dependencies":[{"issue_id":"invoice-hub-2ah","depends_on_id":"invoice-hub-bn9","type":"blocks","created_at":"2026-01-26T14:16:09.492797+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-2ah","depends_on_id":"invoice-hub-cpz","type":"blocks","created_at":"2026-01-26T14:16:09.634474+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-2ko","title":"Portal token revocation enforcement","description":"Regenerating a portal token does not invalidate old tokens. Add a server-side check that the presented token matches the client\\'s current portalToken (or introduce token version/jti) so old links are rejected.","acceptance_criteria":"Old tokens fail auth after regeneration; new token works.","status":"open","priority":1,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:48:24.154501+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T13:48:24.154501+10:00","labels":["auth","portal","security"]}
{"id":"invoice-hub-4cf","title":"Write tests for authenticated PDF endpoint","description":"Write tests for the authenticated PDF endpoint covering:\n- Valid token + owned timesheet → 200 with PDF\n- Valid token + unowned timesheet → 403 Forbidden\n- Invalid token → 401 Unauthorized\n- Expired token → 401 Unauthorized\n- Non-existent timesheet → 404 Not Found\n- Timesheet without PDF → 404 Not Found\n\nFollow existing test patterns in the codebase.","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T14:21:24.644739+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T15:01:58.613017+10:00","closed_at":"2026-01-25T15:01:58.613017+10:00","close_reason":"Added 8 tests covering all auth and error scenarios","labels":["security","testing"],"dependencies":[{"issue_id":"invoice-hub-4cf","depends_on_id":"invoice-hub-gi3","type":"blocks","created_at":"2026-01-25T14:21:32.570682+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-5ad","title":"2.1 Create App Service Web App using existing plan","description":"Create Azure App Service Web App (Node.js 20) using existing shared B1 Linux App Service Plan","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:51.701336+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:30:45.398184+10:00","closed_at":"2026-01-26T14:30:45.398184+10:00","close_reason":"Created app-invoice-hub Web App with Node 22 LTS, startup command configured"}
{"id":"invoice-hub-5w6","title":"Pin JWT algorithm during sign/verify","description":"Explicitly set JWT algorithm on sign and restrict allowed algorithms on verify to avoid algorithm confusion and ensure consistent verification behavior.","acceptance_criteria":"signPortalToken sets algorithm; verifyPortalToken restricts algorithms; tests updated.","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:48:34.508238+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T13:48:34.508238+10:00","labels":["auth","security"]}
{"id":"invoice-hub-688","title":"4.2 Verify API routes and database connectivity","description":"Test API endpoints to confirm they work and can connect to Azure SQL Database","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:56.263668+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:15:56.263668+10:00","dependencies":[{"issue_id":"invoice-hub-688","depends_on_id":"invoice-hub-2ah","type":"blocks","created_at":"2026-01-26T14:16:10.485239+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-6ai","title":"Update portal UI to use authenticated PDF endpoint","description":"Update src/app/portal/[token]/page.tsx to use the new authenticated PDF endpoint.\n\nChange PDF link from:\n  /api/timesheets/${id}/pdf\nTo:\n  /api/portal/${token}/timesheets/${id}/pdf\n\nThe token is already available in the page component from the route params.","status":"closed","priority":1,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T14:21:24.228372+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T15:01:05.974164+10:00","closed_at":"2026-01-25T15:01:05.974164+10:00","close_reason":"Updated portal PDF link to use authenticated endpoint","labels":["portal"],"dependencies":[{"issue_id":"invoice-hub-6ai","depends_on_id":"invoice-hub-gi3","type":"blocks","created_at":"2026-01-25T14:21:32.183387+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-6ax","title":"2.2 Configure environment variables in Azure","description":"Set DATABASE_URL, TOGGL_API_TOKEN, TOGGL_WORKSPACE_ID, AZURE_STORAGE_CONNECTION_STRING, AZURE_STORAGE_CONTAINER, JWT_SECRET in Application Settings","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:52.390918+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:34:57.655509+10:00","closed_at":"2026-01-26T14:34:57.655509+10:00","close_reason":"Environment variables configured in Azure Application Settings","dependencies":[{"issue_id":"invoice-hub-6ax","depends_on_id":"invoice-hub-5ad","type":"blocks","created_at":"2026-01-26T14:16:07.173412+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-6gb","title":"Update timesheet creation with blob storage and duplicate handling","description":"Integrate blob storage into timesheet creation and add duplicate confirmation flow.\n\nTasks:\n- Update POST /api/timesheets to upload PDF to blob storage\n- Store blob URL in pdfUrl field instead of local path\n- Generate/refresh client's portal JWT on successful timesheet creation\n- Add duplicate check endpoint GET /api/timesheets/check?clientId=X\u0026month=Y\n- Add force parameter to POST /api/timesheets to replace existing\n- Update CreateTimesheetForm to check for existing and show confirmation dialog\n- Update existing tests, add tests for new behavior\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 3","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:45.110376+10:00","created_by":"Tim McVinish","updated_at":"2026-01-24T14:37:48.508631+10:00","closed_at":"2026-01-24T14:37:48.508631+10:00","close_reason":"Implemented blob storage upload, JWT generation, duplicate check endpoint, force parameter, and UI confirmation dialog. All 147 tests pass.","dependencies":[{"issue_id":"invoice-hub-6gb","depends_on_id":"invoice-hub-wob","type":"blocks","created_at":"2026-01-20T21:54:24.370634+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-6gb","depends_on_id":"invoice-hub-y2f","type":"blocks","created_at":"2026-01-20T21:54:24.933356+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-6rb","title":"1.2 Enable App Service Authentication in Azure Portal","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:16.273847+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T21:56:13.763489+10:00","closed_at":"2026-01-25T21:56:13.763489+10:00","close_reason":"Closed","dependencies":[{"issue_id":"invoice-hub-6rb","depends_on_id":"invoice-hub-9hw","type":"blocks","created_at":"2026-01-25T21:16:29.408271+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-7fc","title":"3.1 Document Easy Auth configuration","status":"open","priority":3,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:20.542147+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T21:16:20.542147+10:00","dependencies":[{"issue_id":"invoice-hub-7fc","depends_on_id":"invoice-hub-g5n","type":"blocks","created_at":"2026-01-25T21:16:31.316641+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-7fc","depends_on_id":"invoice-hub-1v0","type":"blocks","created_at":"2026-01-25T21:16:31.475759+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-7fc","depends_on_id":"invoice-hub-a7v","type":"blocks","created_at":"2026-01-25T21:16:31.627519+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-7fc","depends_on_id":"invoice-hub-rdt","type":"blocks","created_at":"2026-01-25T21:16:31.767955+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-9hw","title":"1.1 Create Entra ID app registration with user assignment","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:15.638064+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T21:51:58.567656+10:00","closed_at":"2026-01-25T21:51:58.567656+10:00","close_reason":"Closed"}
{"id":"invoice-hub-a7v","title":"2.3 Verify client portal still works with token-based access","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:19.537428+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:01:03.846377+10:00","dependencies":[{"issue_id":"invoice-hub-a7v","depends_on_id":"invoice-hub-etm","type":"blocks","created_at":"2026-01-25T21:16:30.668435+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-aqu","title":"Implement client portal timesheet viewing and approval","description":"Build the client-facing portal for viewing and approving timesheets.\n\nTasks:\n- Create GET /api/portal/[token] with JWT validation, return client data and timesheets\n- Create POST /api/portal/[token]/timesheets/[id]/approve endpoint\n- Update src/app/portal/[token]/page.tsx with timesheet list UI\n- Add approval button for pending timesheets\n- Show approved timesheets in History section\n- Add PDF download links\n- Create expired token page with contact admin message\n- Write tests for portal API routes (valid token, expired token, invalid token)\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 5","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:46.24335+10:00","created_by":"Tim McVinish","updated_at":"2026-01-24T20:58:20.859645+10:00","closed_at":"2026-01-24T20:58:20.859645+10:00","close_reason":"Implemented admin timesheets page and client portal with approval functionality. All 161 tests passing.","dependencies":[{"issue_id":"invoice-hub-aqu","depends_on_id":"invoice-hub-y2f","type":"blocks","created_at":"2026-01-20T21:54:26.026296+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-aqu","depends_on_id":"invoice-hub-6gb","type":"blocks","created_at":"2026-01-20T21:54:26.609963+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-bn9","title":"3.1 Create GitHub Actions workflow for Azure deployment","description":"Create .github/workflows/azure-deploy.yml with build and deploy steps using azure/webapps-deploy action","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:53.217036+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:35:25.583154+10:00","closed_at":"2026-01-26T14:35:25.583154+10:00","close_reason":"Updated GitHub Actions workflow for Next.js standalone deployment","dependencies":[{"issue_id":"invoice-hub-bn9","depends_on_id":"invoice-hub-p9y","type":"blocks","created_at":"2026-01-26T14:16:07.875633+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-bn9","depends_on_id":"invoice-hub-6ax","type":"blocks","created_at":"2026-01-26T14:16:08.023485+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-bq5","title":"1.4 Set Require authentication for unauthenticated requests","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:17.317161+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T21:56:13.831331+10:00","closed_at":"2026-01-25T21:56:13.831331+10:00","close_reason":"Closed","dependencies":[{"issue_id":"invoice-hub-bq5","depends_on_id":"invoice-hub-epr","type":"blocks","created_at":"2026-01-25T21:16:29.709531+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-cpz","title":"3.2 Configure Azure publish profile as GitHub secret","description":"Download publish profile from Azure and add as AZURE_WEBAPP_PUBLISH_PROFILE secret in GitHub repo","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:53.933372+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:38:00.489845+10:00","closed_at":"2026-01-26T14:38:00.489845+10:00","close_reason":"Publish profile secret already configured in GitHub repo","dependencies":[{"issue_id":"invoice-hub-cpz","depends_on_id":"invoice-hub-5ad","type":"blocks","created_at":"2026-01-26T14:16:08.775275+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-dul","title":"Add admin portal link management UI","description":"Allow admin to view, copy, and regenerate client portal links.\n\nTasks:\n- Add portal link display to client detail view (or clients list)\n- Add Copy Portal Link button\n- Add Regenerate Portal Link button with confirmation\n- Create POST /api/clients/[id]/regenerate-token endpoint\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 6","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:46.886631+10:00","created_by":"Tim McVinish","updated_at":"2026-01-21T21:50:53.50512+10:00","closed_at":"2026-01-21T21:50:53.50512+10:00","close_reason":"Closed","dependencies":[{"issue_id":"invoice-hub-dul","depends_on_id":"invoice-hub-y2f","type":"blocks","created_at":"2026-01-20T21:54:27.205991+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-e1r","title":"Create admin timesheets page","description":"Add dedicated page for viewing and managing all timesheets.\n\nTasks:\n- Create src/app/(admin)/timesheets/page.tsx with timesheet list\n- Add columns: Client, Month, Status, Total Hours, Created, Actions\n- Add status badge component (pending/sent/approved/rejected)\n- Add View PDF action (opens blob URL)\n- Add navigation link to sidebar\n- Create timesheets.queries.ts for React Query hooks\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 4","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:45.674964+10:00","created_by":"Tim McVinish","updated_at":"2026-01-24T20:58:20.818244+10:00","closed_at":"2026-01-24T20:58:20.818244+10:00","close_reason":"Implemented admin timesheets page and client portal with approval functionality. All 161 tests passing.","dependencies":[{"issue_id":"invoice-hub-e1r","depends_on_id":"invoice-hub-6gb","type":"blocks","created_at":"2026-01-20T21:54:25.486683+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-epr","title":"1.3 Configure Microsoft as identity provider","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:16.81008+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T21:56:13.798008+10:00","closed_at":"2026-01-25T21:56:13.798008+10:00","close_reason":"Closed","dependencies":[{"issue_id":"invoice-hub-epr","depends_on_id":"invoice-hub-6rb","type":"blocks","created_at":"2026-01-25T21:16:29.554974+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-etm","title":"1.5 Configure path exclusions for client portal","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:17.947002+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T22:01:23.388751+10:00","closed_at":"2026-01-25T22:01:23.388751+10:00","close_reason":"Closed","dependencies":[{"issue_id":"invoice-hub-etm","depends_on_id":"invoice-hub-bq5","type":"blocks","created_at":"2026-01-25T21:16:29.858884+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-ft9","title":"4.1 Verify deployed app loads in browser","description":"Navigate to Azure App Service URL and verify the app renders correctly","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:55.37501+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:15:55.37501+10:00","dependencies":[{"issue_id":"invoice-hub-ft9","depends_on_id":"invoice-hub-2ah","type":"blocks","created_at":"2026-01-26T14:16:10.341241+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-g5n","title":"2.1 Verify admin routes require Microsoft login","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:18.516284+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:01:03.578173+10:00","dependencies":[{"issue_id":"invoice-hub-g5n","depends_on_id":"invoice-hub-etm","type":"blocks","created_at":"2026-01-25T21:16:30.361563+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-gi3","title":"Create authenticated PDF endpoint for portal","description":"Create GET /api/portal/[token]/timesheets/[id]/pdf endpoint that:\n- Validates JWT token using verifyPortalToken()\n- Fetches timesheet by ID\n- Verifies timesheet.clientId === payload.clientId (ownership check)\n- Streams PDF from blob storage on success\n- Returns 401 for invalid/expired tokens\n- Returns 403 for unowned timesheets\n- Returns 404 for missing timesheet/PDF\n\nFollow the pattern from the existing approval endpoint at src/app/api/portal/[token]/timesheets/[id]/approve/route.ts","status":"closed","priority":1,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T14:21:04.599812+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T15:00:42.981765+10:00","closed_at":"2026-01-25T15:00:42.981765+10:00","close_reason":"Created authenticated PDF endpoint at /api/portal/[token]/timesheets/[id]/pdf","labels":["portal","security"]}
{"id":"invoice-hub-ij5","title":"Create proposal for admin dashboard authentication","description":"The admin portal currently has no authentication. Anyone with the URL can access the dashboard, timesheets, clients, and settings. This also means the PDF endpoint at /api/timesheets/[id]/pdf remains publicly accessible since admin has no auth to leverage.\n\nCreate an OpenSpec proposal to add authentication to the admin portal. Options to consider:\n- Simple password-based auth (as noted in project.md)\n- Session-based auth with secure cookies\n- Azure Entra ID (for productization path)\n\nThis blocks fully securing PDF access and other admin-only endpoints.","status":"closed","priority":1,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T14:18:40.103368+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T19:46:08.243971+10:00","closed_at":"2026-01-25T19:46:08.243971+10:00","close_reason":"Created OpenSpec proposal add-admin-auth with proposal.md, design.md, tasks.md, and spec delta","labels":["admin","security"]}
{"id":"invoice-hub-jlp","title":"Add sorting to admin timesheets page","description":"Add sorting functionality to the timesheets list in the admin dashboard. Default sort should be by month (most recent first). Consider allowing sort by other columns like client, status, etc.","status":"open","priority":3,"issue_type":"feature","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:00:05.804908+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:00:05.804908+10:00"}
{"id":"invoice-hub-kib","title":"Protect timesheet PDF access","description":"The PDF endpoint is public by timesheet ID. Add portal token verification and ownership checks (or signed URLs) to prevent unauthorized access.","acceptance_criteria":"PDF download requires valid token/authorization; tests cover access control.","status":"closed","priority":1,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:49:05.547373+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T15:01:58.754132+10:00","closed_at":"2026-01-25T15:01:58.754132+10:00","close_reason":"Implemented authenticated PDF endpoint, updated portal UI, and added tests","labels":["portal","security"],"dependencies":[{"issue_id":"invoice-hub-kib","depends_on_id":"invoice-hub-gi3","type":"blocks","created_at":"2026-01-25T14:21:39.001987+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-kib","depends_on_id":"invoice-hub-6ai","type":"blocks","created_at":"2026-01-25T14:21:39.154156+10:00","created_by":"Tim McVinish"},{"issue_id":"invoice-hub-kib","depends_on_id":"invoice-hub-4cf","type":"blocks","created_at":"2026-01-25T14:21:39.307431+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-p9y","title":"1.2 Test local build with standalone output","description":"Run npm run build and verify standalone output is generated in .next/standalone","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-26T14:15:50.977052+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:21:31.892621+10:00","closed_at":"2026-01-26T14:21:31.892621+10:00","close_reason":"Build succeeds with standalone output - .next/standalone/ created with server.js entry point","dependencies":[{"issue_id":"invoice-hub-p9y","depends_on_id":"invoice-hub-1sz","type":"blocks","created_at":"2026-01-26T14:16:06.469866+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-rdt","title":"2.4 Test logout flow","status":"open","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T21:16:20.049729+10:00","created_by":"Tim McVinish","updated_at":"2026-01-26T14:01:03.981625+10:00","dependencies":[{"issue_id":"invoice-hub-rdt","depends_on_id":"invoice-hub-etm","type":"blocks","created_at":"2026-01-25T21:16:30.824152+10:00","created_by":"Tim McVinish"}]}
{"id":"invoice-hub-wob","title":"Add Azure Blob Storage integration for PDF persistence","description":"Add @azure/storage-blob dependency and create blob client utility.\n\nTasks:\n- Add @azure/storage-blob dependency\n- Create src/lib/blob/client.ts with upload/download/delete functions\n- Add blob storage environment variables (AZURE_STORAGE_ACCOUNT, AZURE_STORAGE_CONTAINER)\n- Write tests for blob client (mock Azure SDK)\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 1","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:43.861363+10:00","created_by":"Tim McVinish","updated_at":"2026-01-20T22:19:24.470701+10:00","closed_at":"2026-01-20T22:19:24.470701+10:00","close_reason":"Implemented and tested"}
{"id":"invoice-hub-x0y","title":"Reduce risk of unsafe JWT decode usage","description":"decodePortalToken is unsafe for auth. Consider renaming (e.g., decodePortalTokenUnsafe) or limiting export to avoid misuse in auth flows.","acceptance_criteria":"Unsafe decode is clearly labeled or constrained; no auth flows rely on decode.","status":"open","priority":4,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-25T13:49:15.921667+10:00","created_by":"Tim McVinish","updated_at":"2026-01-25T13:49:15.921667+10:00","labels":["auth"]}
{"id":"invoice-hub-y2f","title":"Add JWT-based portal token infrastructure","description":"Set up JWT signing/verification for client portal access tokens.\n\nTasks:\n- Add portalToken field to Client model (String, optional - stores JWT)\n- Add JWT_SECRET environment variable for signing\n- Create src/lib/auth/jwt.ts with sign/verify/decode functions\n- Create migration\n- Write tests for JWT utilities\n\nRef: openspec/changes/add-timesheet-persistence/tasks.md section 2","status":"closed","priority":2,"issue_type":"task","owner":"iam@tmcvee.com","created_at":"2026-01-20T21:53:44.534693+10:00","created_by":"Tim McVinish","updated_at":"2026-01-20T22:19:24.507498+10:00","closed_at":"2026-01-20T22:19:24.507498+10:00","close_reason":"Implemented and tested"}
